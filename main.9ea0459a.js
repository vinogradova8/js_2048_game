parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"KIzB":[function(require,module,exports) {
"use strict";function e(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=t(e))){var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o,c=!0,a=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return c=e.done,e},e:function(e){a=!0,o=e},f:function(){try{c||null==i.return||i.return()}finally{if(a)throw o}}}}function n(e){return o(e)||i(e)||t(e)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function t(e,n){if(e){if("string"==typeof e)return c(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,n):void 0}}function i(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function o(e){if(Array.isArray(e))return c(e)}function c(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}var a=document.querySelector("button"),l=document.querySelector(".message-start"),s=document.querySelector(".message-win"),d=document.querySelector(".message-lose"),f=document.querySelectorAll(".field-row"),u=n(f),T=document.querySelector(".game-score");T.innerText=0;for(var x=document.querySelector(".game-field"),h=0,m=document.querySelectorAll(".field-cell"),v=n(m),y=[],g=0;g<=3;g++){for(var L=[],S=g;S<=v.length-1;S+=4)L.push(v[S]);y.push(L)}function p(e,n){return e+Math.ceil(Math.random()*n-e)}function w(){return 1===p(1,10)?4:2}function A(){for(var e=p(1,16),n=document.querySelector(".field-cell--n".concat(e));""!==n.innerText;)e=1+Math.ceil(15*Math.random()),n=document.querySelector(".field-cell--n".concat(e));return n}function b(){n(document.querySelectorAll(".field-cell")).forEach(function(e){if(""===e.innerText){for(var n=2;n<=2048;n*=2)e.classList.contains("field-cell--".concat(n))&&e.classList.remove("field-cell--".concat(n));e.classList.add("field-cell--0")}else{e.classList.contains("field-cell--0")&&e.classList.remove("field-cell--0");for(var r=2;r<=2048;r*=2)e.classList.contains("field-cell--".concat(r))&&e.classList.remove("field-cell--".concat(r));e.classList.add("field-cell--".concat(e.innerText))}})}function q(){var e=w(),n=A();setTimeout(function(){n.classList.add("field-cell--".concat(e)),n.innerText=e},100)}function O(e){for(var n=e.length-1;n>0;n--)""===e[n].innerText&&(e[n].innerText=e[n-1].innerText,e[n-1].innerText="")}function E(e){for(var n=0;n<e.length-1;n++)""===e[n].innerText&&(e[n].innerText=e[n+1].innerText,e[n+1].innerText="")}function J(n,r){var t,i=[],o=e(n);try{for(o.s();!(t=o.n()).done;){var c=t.value;i.push(c.innerText)}}catch(a){o.e(a)}finally{o.f()}i.includes("")&&("ArrowRight"!==r&&"ArrowDown"!==r||(O(n),O(n)),"ArrowLeft"!==r&&"ArrowUp"!==r||(E(n),E(n)))}function N(){var n,r=0,t=e(u);try{for(t.s();!(n=t.n()).done;)for(var i=n.value,o=0;o<3;o++)i.children[o].innerText!==i.children[o+1].innerText&&""!==i.children[o].innerText&&""!==i.children[o+1].innerText&&r++}catch(m){t.e(m)}finally{t.f()}var c,a=e(y);try{for(a.s();!(c=a.n()).done;)for(var l=c.value,f=0;f<3;f++)l[f].innerText!==l[f+1].innerText&&""!==l[f].innerText&&""!==l[f+1].innerText&&r++}catch(m){a.e(m)}finally{a.f()}var T=v.map(function(e){return e.innerText});24===r&&(d.classList.remove("hidden"),x.classList.add("game-over"),h++),T.includes("2048")&&(s.classList.remove("hidden"),x.classList.add("game-over"),h++),h>0&&24===r&&(x.classList.add("game-over"),d.classList.remove("hidden"))}function j(){v.forEach(function(e){e.innerText=""}),b()}b(),a.addEventListener("click",function(){if(a.classList.contains("start"))return a.innerText="Restart",a.classList.remove("start"),a.classList.add("restart"),l.classList.add("hidden"),q(),void q();a.classList.contains("restart")&&(j(),s.classList.add("hidden"),d.classList.add("hidden"),x.classList.remove("game-over"),T.innerText=0,h=0,q(),q())}),document.addEventListener("keydown",function(n){if("ArrowRight"===n.code){if(h>0)return;var r,t=v.map(function(e){return e.innerText}),i=e(u);try{for(i.s();!(r=i.n()).done;){for(var o=r.value,c=o.children.length-1;c>0;c--)J(o.children,n.code),o.children[c].innerText===o.children[c-1].innerText&&""!==o.children[c].innerText&&(o.children[c].innerText="".concat(+o.children[c].innerText+ +o.children[c-1].innerText),o.children[c-1].innerText="",T.innerText=+T.innerText+ +o.children[c].innerText);b()}}catch(l){i.e(l)}finally{i.f()}var a=v.map(function(e){return e.innerText});JSON.stringify(t)!==JSON.stringify(a)&&0===h&&q(),setTimeout(function(){N()},100)}}),document.addEventListener("keydown",function(n){if("ArrowDown"===n.code){if(h>0)return;var r,t=v.map(function(e){return e.innerText}),i=e(y);try{for(i.s();!(r=i.n()).done;){for(var o=r.value,c=o.length-1;c>0;c--)J(o,n.code),o[c].innerText===o[c-1].innerText&&""!==o[c].innerText&&(o[c].innerText="".concat(+o[c].innerText+ +o[c-1].innerText),o[c-1].innerText="",T.innerText=+T.innerText+ +o[c].innerText);b()}}catch(l){i.e(l)}finally{i.f()}var a=v.map(function(e){return e.innerText});JSON.stringify(t)!==JSON.stringify(a)&&0===h&&q(),setTimeout(function(){N()},100)}}),document.addEventListener("keydown",function(n){if("ArrowLeft"===n.code){if(h>0)return;var r,t=v.map(function(e){return e.innerText}),i=e(u);try{for(i.s();!(r=i.n()).done;){for(var o=r.value,c=0;c<o.children.length-1;c++)J(o.children,n.code),o.children[c].innerText===o.children[c+1].innerText&&""!==o.children[c].innerText&&(o.children[c].innerText="".concat(+o.children[c+1].innerText+ +o.children[c].innerText),o.children[c+1].innerText="",T.innerText=+T.innerText+ +o.children[c].innerText);b()}}catch(l){i.e(l)}finally{i.f()}var a=v.map(function(e){return e.innerText});JSON.stringify(t)!==JSON.stringify(a)&&0===h&&q(),setTimeout(function(){N()},100)}}),document.addEventListener("keydown",function(n){if("ArrowUp"===n.code){if(h>0)return;var r,t=v.map(function(e){return e.innerText}),i=e(y);try{for(i.s();!(r=i.n()).done;){for(var o=r.value,c=0;c<o.length-1;c++)J(o,n.code),o[c].innerText===o[c+1].innerText&&""!==o[c].innerText&&(o[c].innerText="".concat(+o[c+1].innerText+ +o[c].innerText),o[c+1].innerText="",T.innerText=+T.innerText+ +o[c].innerText);b()}}catch(l){i.e(l)}finally{i.f()}var a=v.map(function(e){return e.innerText});JSON.stringify(t)!==JSON.stringify(a)&&0===h&&q(),setTimeout(function(){N()},100)}});
},{}]},{},["KIzB"], null)
//# sourceMappingURL=main.9ea0459a.js.map